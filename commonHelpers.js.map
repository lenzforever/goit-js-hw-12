{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/img/close.png","../src/main.js"],"sourcesContent":["'use strict';\nimport axios from 'axios';\naxios.defaults.baseURL = 'https://pixabay.com/api/';\n\nexport async function fetchImages(query, page) {\n  const API_KEY = '44335332-ac36bc3e12fb03490a95e8e95';\n\n  return await axios.get('', {\n    params: {\n      key: API_KEY,\n      q: query,\n      page,\n      per_page: 15,\n      image_type: 'photo',\n      orientation: 'horizontal',\n      safesearch: 'true',\n    },\n  });\n}","'use strict';\n\nimport { loader, showMoreBtn } from '../main';\n\nexport function displayImages(images) {\n  return images\n    .map(\n      image => `\n      <div class=\"gallery-box\">\n      <div class=\"gallery-image\">\n      <a href=\"${image.largeImageURL}\">\n        <img src=\"${image.webformatURL}\" alt=\"${image.tags}\" width=\"400\" height=\"280\">\n      </a>\n      </div>\n       <div class=\"image-info\">\n          <div class=\"info-box>\n          <p class=\"info-label\">Likes:</p>\n          <p class=\"info-value\">${image.likes}</p>\n          </div>\n          <div class=\"info-box>\n          <p class=\"info-label\">Views:</p>\n          <p class=\"info-value\">${image.views}</p>\n          </div>\n          <div class=\"info-box>\n          <p class=\"info-label\">Comments:</p>\n          <p class=\"info-value\">${image.comments}</p>\n          </div>\n          <div class=\"info-box>\n          <p class=\"info-label\">Downloads:</p>\n          <p class=\"info-value\">${image.downloads}</p>\n          </div>\n        </div>\n      </div>\n    `\n    )\n    .join('');\n}\n\nexport function showLoader() {\n  loader.classList.remove('is-hidden');\n}\nexport function hideLoader() {\n  loader.classList.add('is-hidden');\n}\nexport function showBtn() {\n  showMoreBtn.classList.remove('is-hidden');\n}\nexport function hideBtn() {\n  showMoreBtn.classList.add('is-hidden');\n}","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAEpSURBVHgBrZXtEcIgDIZTzp5/3URHcSPpJLpBXcVd+FPwiqQt1y+SUNv3DuUkvA+0SQQg5Jx7WOt8zsBYyudEmXsPuijg3bbtB1ipa/jQYQ+UZVmBpHjyprEvyBTGSjf52zwbssdchBxhTkI4c2vtTTJMxcwgw6RObZReXDycMSYBcTWuQX/6RqcMQpCmIOPNHbG30SKAgkjmU8AJBJ3PpQ5GOO2KCYVFGEaFa9J+EbCEDIAsc5SCTCkFPjWXlHWD2Jvw5MNP2b1HBEzN42OZvhMRwmURly1cCvfrszSlC41PxR6SKjQs3g4Qg6z9PpdBxsitIhWDXrPDcZCtWplHHQEhzY+AiOZ7IJz5qg5iWygK/wjfFwD+T18pdfXe37e0j07jTeTBPZYfWztI8097RKsAAAAASUVORK5CYII=\"","'use strict';\nimport axios from 'axios';\nimport { fetchImages } from './js/pixabay-api.js';\nimport {\n  displayImages,\n  hideLoader,\n  showLoader,\n} from './js/render-functions.js';\nimport { showBtn, hideBtn } from './js/render-functions.js';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\nimport imageUrl from './img/close.png';\nexport const loader = document.querySelector('.loader');\nexport const showMoreBtn = document.querySelector('.show-more');\n\nlet page = 1;\nlet searchQuery = null;\n\nconst formEl = document.querySelector('form');\nconst gallery = document.querySelector('.gallery');\nconst lightbox = new SimpleLightbox('.gallery a', {\n  captionsData: 'alt',\n  captionsDelay: 250,\n});\n\nformEl.addEventListener('submit', async event => {\n  event.preventDefault();\n\n  gallery.innerHTML = '';\n\n  searchQuery = event.currentTarget.elements['search-query'].value.trim();\n\n  if (searchQuery === '') {\n    iziToast.error({\n      message: 'Please enter a search term.',\n      position: 'topRight',\n      titleColor: '#fff',\n      titleSize: '16px',\n      backgroundColor: 'red',\n      messageColor: 'white',\n      iconUrl: imageUrl,\n      theme: 'dark',\n    });\n    return;\n  }\n\n  showLoader();\n  hideBtn();\n\n  page = 1;\n\n  try {\n    const res = await fetchImages(searchQuery, page);\n    if (res.data.total > 0) {\n      iziToast.success({\n        position: 'topRight',\n        message: `We find ${res.data.total} photo`,\n      });\n    }\n    if (res.data.hits.length === 0) {\n      iziToast.error({\n        message:\n          'Sorry, there are no images matching your search query. Please try again.',\n        position: 'topRight',\n        titleColor: '#fff',\n        titleSize: '16px',\n        backgroundColor: 'red',\n        messageColor: 'white',\n        iconUrl: imageUrl,\n        theme: 'dark',\n      });\n    }\n\n    gallery.innerHTML = displayImages(res.data.hits);\n    lightbox.refresh();\n\n    if (res.data.total > 15) {\n      showBtn();\n    }\n  } catch (error) {\n    console.log(error);\n  } finally {\n    event.target.reset();\n    hideLoader();\n  }\n});\n\nshowMoreBtn.addEventListener('click', async () => {\n  page++;\n  try {\n    const res = await fetchImages(searchQuery, page);\n    gallery.insertAdjacentHTML('beforeend', displayImages(res.data.hits));\n    const { height: cardHeight } = document\n      .querySelector('.gallery')\n      .firstElementChild.getBoundingClientRect();\n\n    window.scrollBy({\n      top: cardHeight * 2,\n      behavior: 'smooth',\n    });\n    const lastPage = Math.ceil(res.data.totalHits / 15);\n    if (page === lastPage) {\n      hideBtn();\n      iziToast.info({\n        position: 'topRight',\n        message: \"We're sorry, but you've reached the end of search results.\",\n      });\n    }\n  } catch (error) {\n    console.log(error);\n  } finally {\n    hideLoader;\n  }\n});"],"names":["axios","fetchImages","query","page","API_KEY","displayImages","images","image","showLoader","loader","hideLoader","showBtn","showMoreBtn","hideBtn","imageUrl","searchQuery","formEl","gallery","lightbox","SimpleLightbox","event","iziToast","res","error","cardHeight","lastPage"],"mappings":"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"}